<div class="min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors">
  <!-- Header -->
  <header class="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center py-4">
        <div>
          <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Task Dashboard</h1>
          <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
            Welcome, {{ authService.currentUser()?.username }}
            <span class="ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200">
              {{ authService.currentUser()?.role }}
            </span>
          </p>
        </div>

        <div class="flex items-center space-x-3">
          <!-- Dark Mode Toggle -->
          <button
            (click)="toggleDarkMode()"
            class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition"
            title="Toggle dark mode"
          >
            <svg *ngIf="!darkMode()" class="w-5 h-5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
            </svg>
            <svg *ngIf="darkMode()" class="w-5 h-5 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
            </svg>
          </button>

          <!-- Audit Log Button (Owner/Admin only) -->
          <button
            *ngIf="canViewAuditLog()"
            (click)="showAuditLogModal.set(true)"
            class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition"
          >
            Audit Log
          </button>

          <!-- Create Task Button -->
          <button
            *ngIf="canCreateTask()"
            (click)="showCreateModal.set(true)"
            class="px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition flex items-center space-x-2"
          >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
            </svg>
            <span>New Task</span>
          </button>

          <!-- Logout Button -->
          <button
            (click)="authService.logout()"
            class="px-4 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition"
          >
            Logout
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Stats -->
    <app-task-stats class="block mb-6"></app-task-stats>

    <!-- Filters -->
    <app-task-filters class="block mb-6"></app-task-filters>

    <!-- Task Board -->
    <app-task-board></app-task-board>
  </main>

  <!-- Modals -->
  <app-create-task-modal
    *ngIf="showCreateModal()"
    (close)="showCreateModal.set(false)"
    (taskCreated)="onTaskCreated()"
  ></app-create-task-modal>

  <app-audit-log-modal
    *ngIf="showAuditLogModal()"
    (close)="showAuditLogModal.set(false)"
  ></app-audit-log-modal>
</div>
